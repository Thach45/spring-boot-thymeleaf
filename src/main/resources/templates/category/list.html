<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>Category List</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">
                <i class="fas fa-list-ul me-2"></i>Category Management
            </h2>
            <a th:href="@{/categories/create}" class="btn btn-success">
                <i class="fas fa-plus me-2"></i>Add New Category
            </a>
        </div>
        
        <!-- Search Box -->
        <div class="search-box">
            <form th:action="@{/categories}" method="get" class="row g-3 align-items-center">
                <div class="col-auto flex-grow-1">
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-search"></i>
                        </span>
                        <input type="text" class="form-control" name="keyword" th:value="${keyword}"
                               placeholder="Search categories...">
                    </div>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search me-2"></i>Search
                    </button>
                    <a th:href="@{/categories}" class="btn btn-secondary">
                        <i class="fas fa-redo me-2"></i>Clear
                    </a>
                </div>
            </form>
        </div>

        <!-- Categories Table -->
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="category : ${categories}">
                        <td th:text="${category.id}"></td>
                        <td th:text="${category.name}"></td>
                        <td th:text="${category.description}"></td>
                        <td>
                            <span th:if="${category.active}" class="badge bg-success">
                                <i class="fas fa-check me-1"></i>Active
                            </span>
                            <span th:unless="${category.active}" class="badge bg-danger">
                                <i class="fas fa-times me-1"></i>Inactive
                            </span>
                        </td>
                        <td>
                            <div class="btn-group" role="group">
                                <a th:href="@{/categories/edit/{id}(id=${category.id})}"
                                   class="btn btn-sm btn-primary me-2" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a th:href="@{/categories/delete/{id}(id=${category.id})}"
                                   class="btn btn-sm btn-danger"
                                   onclick="return confirm('Are you sure you want to delete this category?')"
                                   title="Delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr th:if="${categories.empty}">
                        <td colspan="5" class="text-center py-4">
                            <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                            <p class="text-muted mb-0">No categories found</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <nav th:if="${categories.totalPages > 1}" aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item" th:classappend="${categories.first ? 'disabled' : ''}">
                    <a class="page-link" th:href="@{/categories(page=${categories.number - 1}, keyword=${keyword})}">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, categories.totalPages - 1)}"
                    th:classappend="${i == categories.number ? 'active' : ''}">
                    <a class="page-link" th:href="@{/categories(page=${i}, keyword=${keyword})}" th:text="${i + 1}"></a>
                </li>
                <li class="page-item" th:classappend="${categories.last ? 'disabled' : ''}">
                    <a class="page-link" th:href="@{/categories(page=${categories.number + 1}, keyword=${keyword})}">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</body>
</html>